#!/bin/sh

DEPS="opencode glow"
hash $DEPS 2>/dev/null || { echo "[ERROR] please install all dependencies: $DEPS" && exit 1; }

WAIT_TIME="1 hour"
OPENCODE_MODEL=${OPENCODE_MODEL:-${OPENCODE_DEFAULT_MODEL}}

echo "Suggesting an activity for '${WAIT_TIME}' waiting time..."
echo "- using model: $OPENCODE_MODEL"

opencode --model $OPENCODE_MODEL run <<'EOF' | glow
I need ${WAIT_TIME} break because my AI is rate-limited. Suggest a fun activity while I wait.
- Maybe there's Github PR or issues that I can tackle? You can use `gh` cli to check. If there's PR or issue that's worth tackling, include the title or description summary in your result.
- Maybe there's TODO items in the codebase that is easy to solve? Check the codebase and see if something is worth tackling. Include the surrounding code in the result if you find some.
- Or maybe there's something new I can learn... If you think of something, please include the URL

If no relevant PR, issues, or TODOs, just give me something interesting to learn. Before returning the URL, use fetch tool to make sure it exists.
EOF
